<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>

<h3><a href="/DalTest/vi/index.html#/component/detail/com.ctrip.dal.client.timeoutmarkdownbean/com.ctrip.dal.client.TimeoutMarkDownBean" target="console">Timeout Markdown Bean</a></h3>

<h4>Instruction</h4>
<ul>
 <li>First enable auto markedown</li>
 <li>Then enable timeout markedown</li>
 <li>Change timeout errroc ount threshold</li>
  <li>Make timeout request</li>
</ul>

<h3>Timeout Markdown Bean Configure</h3>
<ul>
 <li><a href="/DalTest/PeoplePortal?action=enableAutoMarkdown" target="console">Enable Auto Markdown</a></li>
 <li><a href="/DalTest/PeoplePortal?action=diableAutoMarkdown" target="console">Disable Auto Markdown</a></li>
</ul>

<ul>
 <li><a href="/DalTest/PeoplePortal?action=enableTimeoutMarkdown&value=true" target="console">Enable Timeout Markdown</a></li>
 <li><a href="/DalTest/PeoplePortal?action=enableTimeoutMarkdown&value=false" target="console">Disable Timeout Markdown</a></li>
</ul>

<h4>通过DAL向MultiThreadingTest DB发请求</h4>
<ul>
 <li><a href="/DalTest/PeoplePortal?action=setErrorCountThreshold&value=2" target="console">Set the minimum number of tolerance timeout to 2</a></li>
 <li><a href="/DalTest/PeoplePortal?action=timeout" target="console">Make time consuming request</a></li>
 <li><a href="/DalTest/PeoplePortal?action=nontimeout" target="console">Make normal request</a></li>
</ul>

<h4>ErrorCountThreshold</h4>
<form action="/DalTest/PeoplePortal" method="get" target="console">
	<input type="hidden" name="action" value="setErrorCountThreshold">
	超时数量阀值。例如过去120秒内超过300以上个的timeout错误，则mark down该Database。<br/>
	<input type="text" name="value"><input type="submit" value="set">
</form>

<h4>SamplingDuration</h4>
<form action="/DalTest/PeoplePortal" method="get" target="console">
	<input type="hidden" name="action" value="setSamplingDuration">
	采样周期，单位秒。<br/>
	<input type="text" name="SamplingDuration"><input type="submit" value="set">
</form>

<h4>ErrorPercentThreshold</h4>
<form action="/DalTest/PeoplePortal" method="get" target="console">
	<input type="hidden" name="action" value="setErrorPercentThreshold">
	超时比例阀值，配合ErrorPercentReferCount使用。例如在过去120秒内出现400个错误，有50%为Timeout,即200个，则mark down该Database。<br/>
	<input type="text" name="ErrorPercentThreshold"><input type="submit" value="set">
</form>

<h4>ErrorPercentReferCount</h4>
<form action="/DalTest/PeoplePortal" method="get" target="console">
	<input type="hidden" name="action" value="setErrorPercentReferCount">
	超时比例基数阀值。配合ErrorPercentThreshold一起使用。<br/>
	<input type="text" name="ErrorPercentReferCount"><input type="submit" value="set">
</form>

<h4>MySqlErrorCodes</h4>
<form action="/DalTest/PeoplePortal" method="get" target="console">
	<input type="hidden" name="action" value="setMySqlErrorCodes">
	My SQL timeout的ErrorCode，逗号分割，目前不填写即可。<br/>
	<input type="text" name="MySqlErrorCodes"><input type="submit" value="set">
</form>

<h4>SqlServerErrorCodes</h4>
<form action="/DalTest/PeoplePortal" method="get" target="console">
	<input type="hidden" name="action" value="setSqlServerErrorCodes">
	SQL Server timeout的ErrorCode，逗号分割。<br/>
	<input type="text" name="SqlServerErrorCodes"><input type="submit" value="set">
</form>
</body>
</html>