
<!DOCTYPE html>
<!-- 
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 2.3.2
Version: 1.4
Author: KeenThemes
Website: http://www.keenthemes.com/preview/?theme=metronic
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
	<meta charset="utf-8" />
	<title>Metronic | Admin Dashboard Template</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	<!-- BEGIN GLOBAL MANDATORY STYLES -->        
	<link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
	<link href="../css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>
	<link href="../css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
	<link href="../css/style-metro.css" rel="stylesheet" type="text/css"/>
	<link href="../css/style.css" rel="stylesheet" type="text/css"/>
	<link href="../css/style-responsive.css" rel="stylesheet" type="text/css"/>
	<link href="../css/themes/default.css" rel="stylesheet" type="text/css" id="style_color"/>
	<link href="../css/uniform.default.css" rel="stylesheet" type="text/css"/>
	<!-- END GLOBAL MANDATORY STYLES -->

	<!-- BEGIN PAGE LEVEL STYLES --> 
	<link href="../css/tasks.css" rel="stylesheet" type="text/css" media="screen"/>
	<link href="../css/index.css" rel="stylesheet" type="text/css" media="screen"/>
	<link rel="stylesheet" href="../css/zTreeStyle.css">
	<!-- END PAGE LEVEL STYLES -->
	<link rel="shortcut icon" href="favicon.ico" />
</head>
<!-- END HEAD -->

<!-- BEGIN BODY -->
<body class="page-header-fixed">
	<!-- BEGIN HEADER -->   
	<div class="header navbar navbar-inverse navbar-fixed-top">
		<!-- BEGIN TOP NAVIGATION BAR -->
		<div class="navbar-inner">
			<div class="container-fluid">
				<!-- BEGIN LOGO -->
				<a class="brand" href="index.html">
				<!-- <img src="../img/logo1.png" alt="logo" /> -->
				</a>
				<!-- END LOGO -->
				<!-- BEGIN RESPONSIVE MENU TOGGLER -->
				<a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
				<img src="../img/menu-toggler.png" alt="" />
				</a>          
				<!-- END RESPONSIVE MENU TOGGLER -->            
				<!-- BEGIN TOP NAVIGATION MENU -->              
				<ul class="nav pull-right">
					   
					<!-- BEGIN USER LOGIN DROPDOWN -->
					<li class="dropdown user">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
							<span class="username">Link Wu</span>
							<i class="icon-angle-down"></i>
						</a>
						<ul class="dropdown-menu">
							<li><a href="extra_profile.html"><i class="icon-user"></i> 我的信息</a></li>
							<li><a href="login.html"><i class="icon-key"></i> 注销</a></li>
						</ul>
					</li>
					<!-- END USER LOGIN DROPDOWN -->
				</ul>
				<!-- END TOP NAVIGATION MENU --> 
			</div>
		</div>
		<!-- END TOP NAVIGATION BAR -->
	</div>
	<!-- END HEADER -->
	<!-- BEGIN CONTAINER -->
	<div class="page-container">
		<!-- BEGIN SIDEBAR -->
		<div class="page-sidebar nav-collapse collapse">
			<!-- BEGIN SIDEBAR MENU -->        
			                          <ul class="page-sidebar-menu">
                     <li>
                        <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
                        <div class="sidebar-toggler hidden-phone"></div>
                        <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
                     </li>
                     
                     <li class="sidebar" sidename="project">
                        <a href="./project.html">
                        <i class="icon-windows"></i> 
                        <span class="title">我的项目</span>
                        <span class="selected"></span>
                        </a>
                     </li>
                     <li class="sidebar" sidename="task">
                        <a href="./task.html">
                        <i class="icon-sun"></i> 
                        <span class="title">生成DAO</span>
                        <span class="selected"></span>
                        </a>
                     </li>
                     <li class="sidebar active" sidename="code">
                        <a href="./file.html">
                        <i class="icon-twitter"></i> 
                        <span class="title">项目文件</span>
                        <span class="selected"></span>
                        </a>
                     </li>
                  </ul>
			<!-- END SIDEBAR MENU -->
		</div>
		<!-- END SIDEBAR -->
		<!-- BEGIN PAGE -->
		<div class="page-content">
			<!-- BEGIN PAGE CONTAINER-->
			<div id="main_container" class="container-fluid">

<!--  The main container field -->
<div id="dashboard">
	<br>
	<div class="row-fluid">
		<div class="span12">
			<div class="portlet box green tasks-widget">

				<!-- BEGIN Portlet Title -->
				<div class="portlet-title">
					<div class="caption"><i class="icon-check"></i>文件</div>
					<div class="tools">
						<a href="#" class="icon-refresh reload"></a>
					</div>
					
				</div>
				<!-- End Portlet Title -->

				<!--BEGIN Portlet Body-->
				<div class="portlet-body">
					<div class="task-content">
						<div class="scroller" style="height:332px" data-always-visible="1" data-rail-visible1="1">
							<ul id="treeDemo" class="ztree"></ul>
						</div>
					</div>
				</div>
				<!--END Portlet Body-->

			</div>
		</div>
	</div>


	<div class="row-fluid">
		<div class="span12">
			<div class="portlet box purple tasks-widget">

				<!-- BEGIN Portlet Title -->
				<div class="portlet-title">
					<div class="caption"><i class="icon-check"></i>预览</div>
					<div class="tools">
						<a href="#" class="icon-refresh reload"></a>
					</div>

				</div>
				<!-- End Portlet Title -->

				<!--BEGIN Portlet Body-->
				<div class="portlet-body">
					<div class="task-content">
						<div class="scroller" style="height:332px" data-always-visible="1" data-rail-visible1="1">
							<div id="code_editor" style="height:330px;">      </div>
						</div>
					</div>
				</div>
				<!--END Portlet Body-->

			</div>
		</div>
	</div>
	

</div>
<!-- End of main container-->

</div>
			<!-- END PAGE CONTAINER-->    
		</div>
		<!-- END PAGE -->
	</div>
	<!-- END CONTAINER -->
	<!-- BEGIN FOOTER -->
<!-- 	<div class="footer">
		<div class="footer-inner">
			2013 &copy; Link
		</div>
		<div class="footer-tools">
			<span class="go-top">
			<i class="icon-angle-up"></i>
			</span>
		</div>
	</div> -->
	<!-- END FOOTER -->
	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
	<!-- BEGIN CORE PLUGINS -->   
	<script src="../js/jquery-1.10.1.min.js" type="text/javascript"></script>
	<script src="../js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
	<script src="../js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      
	<script src="../js/bootstrap.min.js" type="text/javascript"></script>
	<script src="../js/twitter-bootstrap-hover-dropdown.min.js" type="text/javascript" ></script>
	<!--[if lt IE 9]>
	<script src="../js/excanvas.min.js"></script>
	<script src="../js/respond.min.js"></script>  
	<![endif]-->   
	<script src="../js/jquery.slimscroll.min.js" type="text/javascript"></script>
	<script src="../js/jquery.blockui.min.js" type="text/javascript"></script>  
	<script src="../js/jquery.cookie.min.js" type="text/javascript"></script>
	<script src="../js/jquery.uniform.min.js" type="text/javascript" ></script>
	<!-- END CORE js -->

	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script src="../js/app.js" type="text/javascript"></script>
	<script src="../js/jquery.ztree.all-3.5.min.js"></script>
	<script src="../js/ace/ace.js" type="text/javascript" charset="utf-8"></script> 
	<!-- END PAGE LEVEL SCRIPTS -->  
	
	<script type="text/javascript">


		//zTree异步加载,配置信息
		var setting = {
			async: {
				enable: true,
				url: getUrl,
				type: "get"
			},
			check: {
				enable: false,
				nocheckInherit: false,
				chkboxType: { "Y": "s", "N": "s" },
				chkDisabledInherit: false
			},
			data: {
				simpleData: {
					enable: true
				}
			},
			callback: {
				onAsyncSuccess: onAsyncSuccess,
				onAsyncError: onAsyncError,
				onClick: zTreeOnClick
			},
			view: {
				fontCss: getFontCss
			}
		};

		function getFontCss(treeId, treeNode) {  
    		return (!!treeNode.highlight) ? {color:"#A60000", "font-weight":"bold"} : {color:"#333", "font-weight":"normal"};  
		} 

		function getUrl(treeId, treeNode) {
			var param = "id="+treeNode.id + "&type="+treeNode.type + "&name="+treeNode.name;
			return "/file/projects?" + param;
		}

		function onAsyncSuccess(event, treeId, treeNode, msg) {
			if (!msg || msg.length == 0) {
				return;
			}
			var zTree = $.fn.zTree.getZTreeObj(treeId);
			zTree.updateNode(treeNode);
			zTree.selectNode(treeNode.children[0]);
		}
		function onAsyncError(event, treeId, treeNode, XMLHttpRequest, textStatus, errorThrown) {
			var zTree = $.fn.zTree.getZTreeObj("treeDemo");
			treeNode.icon = "";
			zTree.updateNode(treeNode);
		}

		function zTreeOnClick(event, treeId, treeNode) {
    		if(!treeNode.isParent){
    			$.get("/file/content?id="+treeNode.id+"&name="+treeNode.name, function(data){
    				var real_data = JSON.parse(data);
    				ace.edit("code_editor").setValue(real_data);
    			});
    		}
		}


		var zNodes =[
		    {name:"所有项目", title:"所有项目",id:"-1", type:"all", isParent:true, nocheck: true}
		];	

		jQuery(document).ready(function() {    

			App.init(); // initlayout and core plugins
				   
			// Tasks.initDashboardWidget();

			jQuery('body').on('click', '.portlet > .portlet-title > .tools > .icon-collapse, .portlet .portlet-title > .tools > .icon-collapse-top', function (e) {
				// e.preventDefault();
		        if (jQuery(this).hasClass("icon-collapse")) {
		            jQuery(this).removeClass("icon-collapse").addClass("icon-collapse-top");
		        } else {
		            jQuery(this).removeClass("icon-collapse-top").addClass("icon-collapse");
		        }
			});

			var editor = ace.edit("code_editor");
		    editor.setTheme("ace/theme/monokai");
		    editor.getSession().setMode("ace/mode/csharp");

		    $.fn.zTree.init($("#treeDemo"), setting, zNodes);

		    $("#daogen").toggleClass('open');

    		$("#daogen .sub-menu").show();


		});

	</script>

	<!-- END JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>
